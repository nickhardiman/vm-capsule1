#
- name: build the service
  hosts: capsule1.lab.example.com
  become: yes
  gather_facts: no
  tasks: 
  - name: I got nothing
    debug: 
      msg: err.....

# similar to Satellite?
# something like 
#
# DNS
#
# firewall
# firewall-cmd --info-service=RH-Satellite-6
# firewall-cmd --permanent --add-service=RH-Satellite-6
# firewall-cmd --permanent --add-service=https
# firewall-cmd --reload
#
# capsule register and update
# subscription-manager register someguy somepass
# dnf update
# systemctl reboot
#
# satellite
# create content view with repos
#  rhel-8-for-x86_64-appstream-rpms                  Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs)
#  rhel-8-for-x86_64-baseos-rpms                     Red Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs)
#  satellite-capsule-6.11-for-rhel-8-x86_64-rpms     Red Hat Satellite Capsule 6.11 for RHEL 8 x86_64 (RPMs)
#  satellite-maintenance-6.11-for-rhel-8-x86_64-rpms Red Hat Satellite Maintenance 6.11 for RHEL 8 x86_64 (RPMs)
# not convinced this one is needed
#  satellite-utils-6.11-for-rhel-8-x86_64-rpms    
# 
# create activation key with content view
#
# create /root/.ssh/id_rsa.pub 
# copy /root/.ssh/id_rsa.pub to capsule1:/root/.ssh/authorized_keys 
#
# capsule
# ??? subscription-manager unregister
# subscription-manager register --activationkey rhel8actkey --org 'myorg'
#  install RPM packages
# dnf module enable satellite-capsule:el8
# dnf install satellite-capsule
#
# satellite
# mkdir /root/capsule_cert
# capsule-certs-generate --foreman-proxy-fqdn capsule1.lab.example.com --certs-tar /root/capsule_cert/capsule_certs.tar
# copy satellite-installer command
# scp /root/capsule_cert/capsule_certs.tar root@capsule1.lab.example.com:/root/capsule_certs.tar
#
# capsule
# run satellite-installer command
#
# satellite
# fix org and location
# sync content
# hammer capsule content synchronize  --name capsule1.lab.example.com
#
# capsule
# checks
# satellite-maintain service list
# satellite-maintain health check

